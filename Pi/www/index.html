<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>DFRobot control</title>
</head>
<body>
<div style="position: absolute; top: 0px; left: 0px;"> <iframe name="foo" id="frameTop" src="indexNonFpv.html" align="left" frameborder="0" height="750" scrolling="yes" width="1600"></iframe>
    
<form target="foo" action="/cgi-bin/dfrobot.sh" method="POST"> <!-- target the form to the frame to prevent page from reloading directly -->    
    <button id = "buttonFPV" onclick="switchToFPV(this)" style="width: 70px; height: 50px; position: absolute; left: 1530px; top: 550px; background-color: rgb(255, 255, 0);" name="cmd" value="start-fpv">start FPV</button> <!-- The start-fpv command will switch the streamer to the Fpv stream. -->   
</form>

<script>
    // indexpage contains indexNonFpv.html or indexFpv.html and is used to switch between NonFpv and Fpv mode.
    // It is a localStorage item to have it persistent between page refreshes.
    // First make sure localStorage items are available.
    if (localStorage.getItem("indexPage") == null)
    {
        localStorage.setItem('indexPage', "indexNonFpv.html");
    }
    // Determine whether we are in NonFpv mode or NonFpv mode and set the button properties accordingly.
    document.getElementById("frameTop").src = localStorage.getItem("indexPage");
    if (localStorage.getItem("indexPage") == "indexNonFpv.html") {
        document.getElementById("buttonFPV").value = "start-fpv";
        document.getElementById("buttonFPV").textContent = "start FPV";
    }
    else {
        document.getElementById("buttonFPV").value = "stop-fpv";
        document.getElementById("buttonFPV").textContent = "stop FPV";
    }

    // Function called when the buttonFPV button is pressed. It will set the localStorage indexPage acordingly.
    function switchToFPV(elem) {
        if (localStorage.getItem("indexPage") == "indexNonFpv.html") {
            localStorage.setItem('indexPage', "indexFpv.html")
        }
        else {
            localStorage.setItem('indexPage', "indexNonFpv.html")
        }
    }

</script>
    
</body></html>